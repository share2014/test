var $api={version:"1.0",win:window,dom:window.document,_a_win_dom:[],_gap_:null,_libaray_path:"/_web_api",inc_css:!0,info:function(a){this.dom.title="==API DEBUG=="+a},lang:{_language_new_version:2,sLanguage:"zh",sCountry:"CN",grid:{_wg_lang_please_select:"\u8bf7\u9009\u62e9@@OBJ_NAME\uff01",_wg_lang_please_select_one:"\u4f60\u53ea\u80fd\u9009\u62e9 1 @@OBJ_UNIT@@OBJ_NAME\uff01",_wg_lang_please_select_del:"\u8bf7\u9009\u62e9\u4f60\u8981\u5220\u9664\u7684@@OBJ_NAME\uff01",_wg_lang_delete_confirm1:"\u5220\u9664\u9009\u4e2d\u7684 @@OBJ_NAME @@OBJ_REMARK \uff1f",
_wg_lang_delete_confirm2:"\u5220\u9664\u9009\u4e2d\u7684@@OBJ_UNIT@@OBJ_NAME \uff1f",_wg_lang_after_delete:"\u5220\u9664\u6210\u529f\uff01",_wg_obj_name:"\u8bb0\u5f55",_wg_obj_unit:"\u6761",_pr_page_info:'<font style="font-size:9pt">\u5171@@RECORD_COUNT\u6761\u8bb0\u5f55\uff0c@@PAGE_SIZE\u6761/\u9875\uff0c\u7b2c@@CURRENT_PAGE/@@PAGE_COUNT\u9875</font>',_wg_goto_page:'<font style="font-size:9pt">\u8df3\u8f6c\u5230\u9875\uff1a</font>',_wg_page_select:"-\u8bf7\u9009\u62e9-",_pr_first_page:"\u9996\u9875",
_pr_last_page:"\u672b\u9875"},form:{_wf_after_action:"\u4fdd\u5b58\u5b8c\u6210\uff01",_wf_please_input:"\u8bf7\u8f93\u5165@@ELEMENT@@FORMAT\uff01",_wf_please_select:"\u8bf7\u9009\u62e9@@ELEMENT@@FORMAT\uff01",_wf_integer_input:"(\u5fc5\u987b\u8f93\u5165\u6574\u6570)",_wf_number_input:"(\u5fc5\u987b\u8f93\u5165\u6570\u503c)",_wf_input_error:"\u8f93\u5165\u9519\u8bef\uff01",_wf_number_input2:"\u8f93\u5165\u9519\u8bef\u2014\u2014\u8bf7\u8f93\u5165\u6570\u5b57\uff01"}},fn:{_prefix_of_ip_exp:"@@IPEXP_",
_a_ip_replace_exp:[],_ip_replace_exp:"",_ip_list_flag:"0;1;2;3;4;5;6;7;8;9",_ip_list_flag_alias:"",bDistributedWebApp:!0,sDefaultCharset:"UTF-8",sWebServerCharset:"UTF-8",sUploadFolderInEditor:null,aAppWebFlag:[],aAppWeb:[],sCurWeb:"",sLocalPortal:"",sSplitChar:";",STATE_COMPLETED:4,STATUS_OK:200,_AJAX_LANGUAGE:"_ajax",_grid_prefix:"div_grid_",_form_prefix:"div_form_",oRowSelection:[],_wf_integer:"0",_wf_double:"0",_wf_string:"0",_wf_webform_version:2.2,ext_page_flag:[],ext_page_data:[],_IE:function(){return _IE()},
_FireFox:function(){return _FireFox()},_ED:function(a){this.isInt(a)&&(a+="");return _ED(a)},_ED2:function(a){this.isInt(a)&&(a+="");return _ED2(a)},_MIDB:function(a){return vbsMidB(a)},_ASC:function(a){return vbsASC(a)},_CHR:function(a){return vbsCHR(a)},_GAP:function(){var a=_IO(_WLH(),"/",8),b=_IO(_WLH(),"/",a+1);$api._gap_=_SS(_WLH(),a,b)},setExtData:function(a,b){for(var c=0;c<this.ext_page_flag.length;c++)if(this.ext_page_flag[c]==a){""!=b&&(this.ext_page_data[c]=b);return}this.ext_page_flag[this.ext_page_flag.length]=
a;this.ext_page_data[this.ext_page_data.length]=b},getExtData:function(a){for(var b=0;b<this.ext_page_flag.length;b++)if(this.ext_page_flag[b]==a)return this.ext_page_data[b];return""},addAppWeb:function(a,b){this.aAppWebFlag[this.aAppWebFlag.length]=a;this.aAppWeb[this.aAppWeb.length]=b},getAppWeb:function(a){for(var b=0;b<this.aAppWebFlag.length;b++)if(this.aAppWebFlag[b].toLowerCase()==a.toLowerCase())return this.aAppWeb[b].split(this.sSplitChar);return null},_isEqualsFlag:function(a,b){return"INNER_IP"==
a&&"NETBIOS"==b||"INNER_IP"==b&&"NETBIOS"==a||a==b.replace("_IP","_DNS")||a==b.replace("_DNS","_IP")?!0:!1},setIPListFlag:function(a,b){this._ip_list_flag=a.replace(/\,/g,";");this._ip_list_flag_alias=null==b?"":b.replace(/\,/g,";")},addIpExp:function(a,b){if(null!=this._a_ip_replace_exp){for(var c=this._a_ip_replace_exp.length,d=0;d<this._a_ip_replace_exp.length;d+=2)if(b.toLowerCase()>this._a_ip_replace_exp[d+1].toLowerCase()){for(c=this._a_ip_replace_exp.length+1;c>=d+1&&0<c;c-=2)this._a_ip_replace_exp[c]=
this._a_ip_replace_exp[c-2],this._a_ip_replace_exp[c-1]=this._a_ip_replace_exp[c-3];c=d;break}else if(b.toLowerCase()==this._a_ip_replace_exp[d+1].toLowerCase()){this._a_ip_replace_exp[d]=a;return}this._a_ip_replace_exp[c]=a;this._a_ip_replace_exp[c+1]=b}},_language_getObjectName:function(a,b){for(var c=null==b?"":b,d=a.toLowerCase().split("_"),e=0;e<d.length;e++)c=""==c?c+d[e]:c+(d[e].substring(0,1).toUpperCase()+(1<d[e].length?d[e].substring(1):""));return c},getHtml:function(a){return a},trim:function(a){for(var b=
-1;" "==a.substring(++b,b+1););a=a.substring(b);for(b=a.length;" "==a.substring(--b,b+1););return a=a.substring(0,b+1)},isValidate:function(a,b){var c=b;null==c&&(c=" !@#$%^&*()+-={}[]<>:;'\",/\\?`~");null==a&&(a="");for(var d=0;d<a.length;d++)if(-1!=c.indexOf(a.substring(d,d+1)))return!1;return!0},getBitLength:function(a){for(var b=0,c=0;c<a.length;c++)128<a.charCodeAt(c)&&b++;return a.length+b},bitSubstring:function(a,b){var c=2*b;if(this.getBitLength(a)<c)return a;for(var d=0,e="",f=0;f<a.length;f++){d++;
128<a.charCodeAt(f)&&d++;if(d>=c){d==c&&(e+=a.substring(f,f+1));break}e+=a.substring(f,f+1)}return e},getTextFromHTML:function(a){for(var b=0,c=-1,d=0,e=!1,f="",d="",g=d=0;-1!=b;){b=a.indexOf("<",c);if(-1==b){0>=g&&(f+=a.substring(c+1));break}0>=g&&(f+=a.substring(c+1,b));for(d=c=b;;){c=a.indexOf(">",c+1);d=a.indexOf('"',d+1);for(e=!1;d<c&&-1!=d;)-1!=d&&(e=!e),d=a.indexOf('"',d+1);if(!e)break}d=a.indexOf(" ",b);if(-1==d||d>=c)d=c;-1!=d&&(d=a.substring(b+1,d),"BR"==d.toUpperCase()&&(f+="\n"),"SCRIPT"==
d.toUpperCase()&&g++,"/SCRIPT"==d.toUpperCase()&&g--)}return this.htmlDecode(f)},htmlDecode:function(a){if(null==a)return"";a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&nbsp;/gi," ");a=a.replace(/&quot;/gi,'"');return a=a.replace(/&amp;/gi,"&")},htmlEncode:function(a){if(null==a)return"";a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/ /gi,"&nbsp;");return a=a.replace(/\"/gi,"&quot;")},getInnerText:function(a){if(null==a)return"";if(_IE())return a.innerText;
for(var a=a.innerHTML,b=a.length;0<b;b--){var c=a.charAt(b-1);if(" "!=c&&"\n"!=c&&"\r"!=c)return this.getTextFromHTML(a.substring(0,b))}return""},getInnerHTML:function(a){if(null==a)return"";a=a.innerHTML;if(!_IE())for(var b=a.length;0<b;b--){var c=a.charAt(b-1);if(" "!=c&&"\n"!=c&&"\r"!=c){a=a.substring(0,b);break}}return a},removeScriptTag:function(a){if(null==a)return"";for(var b=a.toUpperCase(),c="",d=0,e=0,f=0,d=0;;)if(d=b.indexOf("<SCRIPT ",e),-1==d){c+=a.substring(e);break}else for(var c=c+
a.substring(e,d),g=0;;)if(f=b.indexOf('"',d),0<f&&"\\"==b.substring(f-1,f))d=f+1;else{d=b.indexOf("<\/SCRIPT>",d);if(-1==d)return"";if((f>d||-1==f)&&0==g%2){e=d+9;break}else g++,d=f+1}return c},getOuterHTML:function(a){if(_IE())return a.outerHTML;for(var b="<"+a.tagName,c=0;c<a.attributes.length;c++)a.attributes[c].specified&&(b+=" "+a.attributes[c].name+'="'+a.attributes[c].value+'"');b+=">";-1==";AREA;BASE;BASEFONT;COL;FRAME;HR;IMG;BR;INPUT;ISINDEX;LINK;META;PARAM;".indexOf(";"+a.tagName+";")&&
(b+=this.getInnerHTML(a),b+="</"+a.tagName+">");return b},getLocalFilePath:function(a){if($api.fn._FireFox())try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){return alert("\u60a8\u7684firefox\u5b89\u5168\u9650\u5236\u9650\u5236\u60a8\u83b7\u53d6\u6587\u4ef6\u8def\u5f84\u64cd\u4f5c\uff0c\u8bf7\u6253\u5f00\u2019about:config\u2019\u5c06signed.applets.codebase_principal_support\u2019\u8bbe\u7f6e\u4e3atrue\u2019\u4e4b\u540e\u91cd\u8bd5"),""}return a.value},getFileExtName:function(a){var b=
a.indexOf("?"),c=a;-1!=b&&(c=a.substring(0,b));a=c.lastIndexOf(".");b=c.replace(/\\/g,"/").lastIndexOf("/");return 0>=a||b>a?"":c.substring(a+1)},getFileBaseName:function(a){var a=this.getFileName(a),b=a.lastIndexOf(".");-1!=b&&(a=a.substring(0,b));return a},getFileName:function(a){var b=a.indexOf("?"),c=a;-1!=b?(c=a.substring(0,b),a.substring(b)):b=a.length;c=c.replace(/\\/g,"/").lastIndexOf("/");return a.substring(c+1,b)},formatFileName:function(a,b){var c="";0==a.toLowerCase().indexOf("http://")&&
(a=a.replace(/:80\//g,"/"));for(var d="http://,ftp://,file://,mailto:,mms://,rtsp://,lmsp://".split(","),e=0;e<d.length;e++)if(a.toLowerCase().substring(0,d[e].length)==d[e]){c=d[e];a=a.substring(d[e].length);break}"/"!=b&&"\\"!=b&&(b="\\");for(a=a.replace(RegExp("/","g"),"\\");-1!=a.indexOf("\\\\");)a=a.replace(/\\\\/g,"\\");a=a.replace(/\\/g,b);return c+a},toVariableName:function(a,b){for(var c=b,d=a.toLowerCase().split("_"),e=0;e<d.length;e++)0!=d[e].length&&(c+=d[e].substring(0,1).toUpperCase()+
d[e].substring(1));-1!=",id,classname,class,style,name,width,height,text".indexOf(c.toLowerCase())&&(c="_"+c);return c},encodeURL:function(a,b){null==b&&(b=this.sDefaultCharset);return"UTF-8"==b.toUpperCase()?this.encodeURLUTF8(a):"GBK"==b.toUpperCase()||"GB2312"==b.toUpperCase()?this.encodeURLGBK(a):a},decodeURL:function(a,b){null==b&&(b=this.sDefaultCharset);return"UTF-8"==b.toUpperCase()?this.decodeURLUTF8(a):"GBK"==b.toUpperCase()||"GB2312"==b.toUpperCase()?this.decodeURLGBK(a):a},encodeURLUTF8:function(a){if(null==
a)return"";for(var a=a.toString(),b="",c="",d=c=0;d<a.length;d++)" "==a.charAt(d)?b+="%20":0<a.charCodeAt(d)&&128>a.charCodeAt(d)?65<=a.charCodeAt(d)&&90>=a.charCodeAt(d)||97<=a.charCodeAt(d)&&122>=a.charCodeAt(d)||48<=a.charCodeAt(d)&&57>=a.charCodeAt(d)?b+=a.charAt(d):(c=a.charCodeAt(d).toString(16),1==c.length&&(c="0"+c),b+="%"+c):0<a.charCodeAt(d)&&2048>a.charCodeAt(d)?(c=(a.charCodeAt(d)&4032)/64+192,b+="%"+c.toString(16),c=(a.charCodeAt(d)&63)+128,b+="%"+c.toString(16)):0<a.charCodeAt(d)&&65536>
a.charCodeAt(d)?(c=(a.charCodeAt(d)&61440)/4096+224,b+="%"+c.toString(16),c=(a.charCodeAt(d)&4032)/64+128,b+="%"+c.toString(16),c=(a.charCodeAt(d)&63)+128,b+="%"+c.toString(16)):b+=a.charAt(d);return b},decodeURLUTF8:function(a){if(null==a)return"";for(var a=a.toString(),b="",c=0,d=0,d="",e=0;e<a.length;e++)"+"==a.charAt(e)?b+=" ":"%"==a.charAt(e)?(d=a.substring(e+1,e+3),d=parseInt(d,16),128>d?(b+=String.fromCharCode(d),e+=2):224>d?(c=64*(d-192),d=a.substring(e+4,e+6),d=parseInt(d,16),c+=d-128,b+=
String.fromCharCode(c),e+=5):240>d&&(c=4096*(d-224),d=a.substring(e+4,e+6),d=parseInt(d,16),c+=64*(d-128),d=a.substring(e+7,e+9),d=parseInt(d,16),c+=d-128,b+=String.fromCharCode(c),e+=8)):b+=a.charAt(e);return b},encodeURLGBK:function(a){if(null==a)return"";a=a.toString();if(this._IE())return a;for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);0<=d&&128>d?32==d?b+="%20":48<=d&&57>=d||65<=d&&90>=d||97<=d&&122>=d?b+=a.charAt(c):(d=d.toString(16),1==d.length&&(d="0"+d),b+="%"+d):2048>d?b+=a.charAt(c):
65536>d&&(d=this._ASC(a.charAt(c)),0>d&&(d+=65536),d=d.toString(16),b+="%"+d.substring(0,2)+"%"+d.substring(2,4))}return b},decodeURLGBK:function(a){if(null==a)return"";a=a.toString();if(this._IE())return a;for(var b="",c=0;c<a.length;c++){var d=a.charAt(c);if("+"==d)b+=" ";else if("%"==d)if(d=a.substring(c+1,c+3),d=parseInt(d,16),0<d&&128>d)b+=String.fromCharCode(d),c+=2;else var d=a.substring(c+1,c+3),e=a.substring(c+4,c+6),d=parseInt(d+e,16)-65536,b=b+this._CHR(d),c=c+5;else b+=d}return b},encodeURLPath:function(a,
b){if(null==a)return"";null==b&&(b=this.sDefaultCharset);var c=a,d="",e=a.indexOf("?"),f="";-1!=e&&(c=a.substring(0,e),d=a.substring(e+1));for(e=0;e<c.length;e++)var g=c.charCodeAt(e),f=0>g||128<g||-1!="+&=?,%".indexOf(c.charAt(e))?f+this.encodeURL(c.substring(e,e+1),b):f+c.substring(e,e+1);""!=d&&(f+="?"+d);return f},isNumeric:function(a,b){var c=0;if(null==a||""==a)return!1;for(var a=a+"",d=0;d<a.length;d++)if(48>a.charCodeAt(d)||57<a.charCodeAt(d)){if("."==a.charAt(d)&&(c++,1>=c))continue;if("-"==
a.charAt(d)){if(0<d)return!1}else return!1}return b?0==c:!0},isInt:function(a){return this.isNumeric(a,!0)},isFloat:function(a){if(null==a||""==a)return!1;a+="";if(-1!=a.indexOf("."))var b=a.indexOf("."),a=a.substring(0,b)+a.substring(b+1);return!this.isNumeric(a)?!1:!0},isPercentStr:function(a){return""==a||null==a||"%"==a||"%"!=a.substring(a.length-1)||isNaN(a.substring(0,a.length-1))?!1:!0},getRandomString:function(a,b){null==a&&(a=0);for(var c="0123456789"+(b?"":"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),
d="";d.length<a;){var e=parseInt(Math.random()*c.length);e>=c.length&&(e-=c.length);d+=c.substring(e,e+1)}return d},decodeResponseBody:function(a){for(var b=[],a=this._MIDB(a.request.responseBody),a=escape(a).replace(/%u/g,"").replace(/(.{2})(.{2})/g,"%$2%$1").replace(/%([A-Z].)%(.{2})/g,"@$1$2"),a=a.split("@"),c=0,d=a.length,e;++c<d;)e=a[c].substring(0,4),b[e]||(b[e]=escape(this._CHR(eval("0x"+e))).substring(1,6)),a[c]=b[e]+a[c].substring(4);return unescape(a.join("%"))},_processData:function(a){null==
a||null==a.request||a.request.readyState==this.STATE_COMPLETED&&(a.request.status==this.STATUS_OK?null!=a.callBack&&a.callBack(a):null!=a.errorHandle&&a.errorHandle(a))},convertorAjaxScript:function(a,b){for(var c=-1,d="",e="";-1!=b.toLowerCase().indexOf("<script language=ajxscript>");){c=b.toLowerCase().indexOf("<script language=ajxscript>");d+=b.substring(0,c);b=b.substring(c+27);sScript=b.substring(0,b.toLowerCase().indexOf("<\/script>"));b=b.substring(b.toLowerCase().indexOf("<\/script>")+9);
null!=sScript&&0!=sScript.indexOf("$wapper.fn.")&&0!=sScript.indexOf("parseInt")&&0!=sScript.indexOf("parseFloat")&&0!=sScript.indexOf("isNaN")&&(sScript="$wapper.fn."+sScript);try{e=eval(sScript.replace(/\$wapper\.fn/g,a.win.$wapper.win_remark.replace(/\"/g,"'")))}catch(f){e=""}null!=e&&(d+=e)}return d+b},formatAjaxData:function(a){a=a.replace(/\n/gi,"");return a=a.replace(/\r/gi,"")},writeAjaxPageAnchor:function(a,b,c){if(null==c||""==c)c="page";var d=a-a%10+1;0==a%10&&(d-=10);var e="<nobr>",f=
d+10;1<b&&(e+="<a href=\"javascript:$wapper.api.changeAjaxPageIndex(1,'"+c+"')\">"+$api.lang.grid._pr_first_page+'</a>&nbsp;<a href="javascript:$wapper.api.changeAjaxPageIndex('+b+",'"+c+"')\">"+$api.lang.grid._pr_last_page+"</a>&nbsp;");for(10<a&&(e+='<a href="javascript:$wapper.api.changeAjaxPageIndex('+(a-10)+",'"+c+"')\">&lt;&lt;</a>&nbsp;");d<f&&d<=b;d++)1>=b||(e=d==a?e+(d+"&nbsp;"):e+('<a href="javascript:$wapper.api.changeAjaxPageIndex('+d+",'"+c+"')\"><b>"+d+"</b></a>&nbsp;"));f<=b&&(e+='<a href="javascript:$wapper.api.changeAjaxPageIndex('+
(a+10<=b?a+10:b)+",'"+c+"')\">&gt;&gt;</a>");return"<span id=spanPageAnchor_"+c+' style="display:'+(1<b?"":"none")+'">'+(e+"</nobr>")+"</span>"},writeAjaxPageSelect:function(a,b,c){if(null==c||""==c)c="page";var d;d=""+("<nobr>"+$api.lang.grid._wg_goto_page+"<select id=selPageSelect onchange=$wapper.api.changeAjaxPageIndex(this.value,'"+c+"')>");if(1>=b)d+='<option value="">'+$api.lang.grid._wg_page_select;else for(var e=1;e<=b;e++)d+='<option value="'+e+'" '+(e==a?"selected":"")+">&nbsp;"+e+"&nbsp;";
return"<span id=spanPageSelect_"+c+">"+(d+"</select></nobr>")+"</span>"},writeAjaxPageTextBox:function(a,b,c){if(null==c||""==c)c="page";b="<nobr>"+$api.lang.grid._wg_goto_page;return"<span id=spanPageTextBox_"+c+">"+(b+('<input style="width:40px;text-align:center;" value="'+a+"\" onkeyup=\"if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=''){$wapper.api.changeAjaxPageIndex(this.value,'"+c+"');}else{this.value='';}}\">")+"</nobr>")+"</span>"},csvToArray:function(a,b,c,d){var e=[],f=!1,g="",
i="";null==b&&(b='"');null==c&&(c=",");null==d&&(d="\n");for(var h=[],j=0;j<a.length;j++)if(g=a.substring(j,j+1),g==b&&(f=!f),!f&&(g==c||g==d||j==a.length-1)){if(j==a.length-1&&g!=c&&g!=d&&(i+=g),i.substring(0,1)==b&&i.substring(i.length-1)==b&&(i=i.substring(1,i.length-1)),i=i.replace(RegExp(b+b,"gi"),b),h[h.length]=this.formatCSVData(i),i="",g==c&&j==a.length-1&&(h[h.length]=this.formatCSVData(i)),g==d||j==a.length-1){if(1<h.length||""!=h[0])e[e.length]=h;h=[]}}else i+=g;0==e.length&&(e[0]=[],e[0][0]=
"");return e},formatCSVData:function(a){13==a.charCodeAt(a.length-1)&&(a=a.substring(0,a.length-1));return a},getActionURL:function(a,b,c){var d=a.indexOf("?"),e=a,f="";-1!=d&&(e=a.substring(0,d),f=a.substring(d+1));null==c&&(c=$api._gap_);return c+"/servlet/com.lemon.web.ActionServlet?handler="+this.encodeURL(e)+"&"+f+"&_no_html="+(b?1:0)+"&"+Math.random()},id:function(a,b){return a.dom.getElementById(b)},form:function(a,b,c){return 2==arguments.length?a.dom.getElementById("form1").elements.namedItem(b):
a.dom.getElementById(b).elements.namedItem(c)},item:function(a,b){return a.elements.namedItem(b)},include:function(a,b,c){for(var b=b.split(","),d=0;d<b.length;d++)if(""!=b[d]){var e=b[d].toLowerCase(),f=e.substring(e.lastIndexOf(".")+1).toLowerCase();-1==",js,vbs,css,jsp,".indexOf(","+f+",")&&-1==e.indexOf("?")&&(b[d]+=".js");null==c||-1!=c.indexOf(","+b[d]+",")||(c+=b[d]+",",f=b[d].substring(b[d].lastIndexOf(".")+1).toLowerCase(),"/"!=b[d].substring(0,1)&&"./"!=b[d].substring(0,2)&&"../"!=b[d].substring(0,
3)&&"http://"!=b[d].substring(0,7).toLowerCase()&&(b[d]=$api._libaray_path+"/"+b[d]),"vbs"==f?a.win.document.write('<script language=vbscript src="'+b[d]+'"><\/script>'):"css"==f?a.win.document.write('<link rel=stylesheet href="'+b[d]+'">'):a.win.document.write('<script language=javascript src="'+b[d]+'"><\/script>'))}},getWebURL:function(a,b,c,d){a="string"==typeof a?this.getAppWeb(a):a;if(null==a)return $api._gap_;if(!this.bDistributedWebApp)return c=a[0],b=c.lastIndexOf("/"),b==c.length-1&&(b=
c.lastIndexOf("/",b-1)),c=6==b?"":-1!=b?c.substring(b):"",(-1==a[0].toLowerCase().indexOf("http://")?"":"http://")+$api.win.location.host+c;var e="",f=this._ip_list_flag.split(";"),g=this._ip_list_flag_alias.split(";"),i=null,d=null==d?$api.win.location.host:d;if(null==b)b=this._ip_list_flag;else for(var h=0;h<g.length&&0==g.length%2;h+=2)b=b.replace(g[h],g[h+1]);i=b.split(";");":80"==d.substring(d.length-3)&&(d=d.substring(0,d.length-3));b=this.getAppWeb(this.sCurWeb);for(h=0;h<b.length&&h<f.length;h++)if(-1!=
b[h].indexOf(":80/")&&(b[h]=b[h].replace(/:80\//g,"/")),-1!=b[h].toUpperCase().indexOf(("HTTP://"+d).toUpperCase())){e=f[h];break}if(""==e)return null==c?a[0]:c;for(h=0;h<i.length;h++)if(i[h]==e)return a[h].replace(/:80\//g,"/");for(h=0;h<i.length;h++)if(this._isEqualsFlag(i[h],e))return a[h].replace(/:80\//g,"/");for(h=0;h<i.length;h++)if(-1!=a[h].indexOf(d))return a[h].replace(/:80\//g,"/");return null==c?a[0]:c},getSaveFormat:function(a,b){this.addIpExp("http://"+a.win.location.host+$api._gap_,
"_CURRENT_WEB");this.addIpExp("http://"+a.win.location.host,"_CURRENT_HOST");for(var c=this._a_ip_replace_exp,d=0;d<c.length;d+=2)""==c[d]||""==c[d+1]||(b=b.replace(RegExp(c[d],"gi"),this._prefix_of_ip_exp+c[d+1]));return b},getDisplayFormat:function(a,b){var c=null==a?$api.win:a.win;this.addIpExp("http://"+c.location.host+$api._gap_,"_CURRENT_WEB");this.addIpExp("http://"+c.location.host,"_CURRENT_HOST");for(var c=this._a_ip_replace_exp,d=0;d<c.length;d+=2)""==c[d]||""==c[d+1]||(b=b.replace(RegExp(this._prefix_of_ip_exp+
c[d+1],"gi"),c[d]));return b},getQueryString:function(a,b,c,d){var e=a.win.document.getElementById("_form_url_params");if((null==d||d==a.win.location.href)&&e&&"FORM"==e.tagName)return a=e.elements.namedItem(b),null==a||""==a.value?c:this.decodeURL(a.value);null==d&&(d=a.win.location.href);var e=d.replace("?","&").toUpperCase(),f=e.indexOf("&"+b.toUpperCase()+"=");if(-1==f)return c;var g=e.indexOf("&",f+b.length+2);-1==g&&(g=e.indexOf("#",f+b.length+2),-1==g&&(g=e.length));d=d.substring(f+b.length+
2,g);""==d&&"returl"==b&&(d=this.getExtData(this.getFileBaseName(a.win.location.href)));""==d&&(d=c);return this.decodeURL(d)},setQueryString:function(a,b,c,d,e,f){var g=a.win.document.getElementById("_form_url_params");if((null==d||d==a.win.location.href)&&g&&"FORM"==g.tagName)return f=g.elements.namedItem(b),null!=f?f.value=this.encodeURL(c):(f=a.win.document.createElement("SPAN"),f.innerHTML="<INPUT type=hidden id="+b+" name="+b+' value="'+this.encodeURL(c)+'">',g.appendChild(f)),a.win.location.href;
null==d&&(d=a.win.location.href);a="";g=d.indexOf("#");-1!=g&&(a=d.substring(g+1),d=d.substring(0,g));for(var b=null==b?"":b,g="",d=d.replace(/\?/g,"&").split("&"),i=!1,g=g+(d[0]+"?"),h=1;h<d.length;h++)d[h].substring(0,b.length+1).toUpperCase()==(b+"=").toUpperCase()?(null!=c&&(g+=("?"==g.substring(g.length-1)?"":"&")+b+"="+this.encodeURL(c)),i=!0):-1!=d[h].indexOf("=")&&(g+=("?"==g.substring(g.length-1)?"":"&")+d[h]);!i&&""!=b&&null!=c&&(g+=("?"==g.substring(g.length-1)?"":"&")+b+"="+this.encodeURL(c));
e||(b=""+Math.random(),b=b.substring(5,10),g+=("?"==g.substring(g.length-1)?"":"&")+b+(!f?""==a?"":"#"+a:""));return g},setURLParams:function(a,b,c){if(null==c||""==c)return b;for(var c=c.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");2==e.length&&"returl"!=e[0]&&(b=this.setQueryString(a,e[0],this.decodeURL(e[1]),b))}return b},getURLHost:function(a,b){null==b&&(b=a.win.location.href);for(var c=b=this.formatFileName(b.toString(),"/"),d="http://,ftp://,file://,mailto:,mms://,rtsp://,lmsp://".split(","),
e=0;e<d.length;e++)if(0==b.toLowerCase().indexOf(d[e])){c=b.substring(d[e].length);break}d=c.indexOf("/");return-1==d?c:c.substring(0,d)},getURLParams:function(a,b){var c=a.win.document.getElementById("_form_url_params");if((null==b||b==a.win.location.href)&&c&&"FORM"==c.tagName){for(var d="",e=0;e<c.elements.length;e++)d+=(""==d?"":"&")+c.elements[e].name+"="+c.elements[e].value;return d}null==b&&(b=a.win.location.href);c=b.indexOf("?");if(-1==c)return"";d=b.indexOf("#",c);-1==d&&(d=b.length);return b.substring(c+
1,d)},getURLPathName:function(a,b){null==b&&(b=a.win.location.href);var c=b.indexOf("?");return-1==c?b:b.substring(0,c)},getURLAnchorName:function(a,b){null==b&&(b=a.win.location.href);var c=b.indexOf("#");return-1==c?"":b.indexOf(c+1)},includeLangBundle:function(a,b,c,d,e){null==b&&(b=d);c||(c=$api._gap_);a.win.location.href.indexOf($api._libaray_path+"/")==a.win.location.href.indexOf("/",8)&&(c=this.getQueryString(a,"system_owner_app",""),null!=d&&(b="_"+b));b=c+"/servlet/com.lemon.web.LanguageServlet?base_name="+
b;-1==e.indexOf(b+"\n")&&a.win.document.write('<script language=javascript src="'+b+"&"+Math.random()+'"><\/script>')},_includeLangBundle:function(a,b,c,d,e){null==b&&(b=d);c||(c=$api._gap_);a.win.location.href.indexOf($api._libaray_path+"/")==a.win.location.href.indexOf("/",8)&&(c=this.getQueryString(a,"system_owner_app",""),null!=d&&(b="_"+b));b=c+"/servlet/com.lemon.web.LanguageServlet?base_name="+b;-1==e.indexOf(b+"\n")&&a.win.document.write('<script language=javascript src="'+b+"&"+Math.random()+
'"><\/script>')},doLanguageBinding:function(a,b){for(var c=b.split(","),d=0;d<c.length;d++){var e=this._language_getObjectName(c[d]),f=a.win.document.getElementsByName(e);if(null==f||0==f.length)(e=a.win.document.getElementById(e))&&(f=[e]);for(e=0;f&&e<f.length;e++){var g=f[e];"INPUT"!=g.tagName?g.innerHTML=eval(a.win.$wapper.win_remark.replace(/\"/g,"'")+"."+this._language_getObjectName(c[d],"s")):"BUTTON"==g.type.toUpperCase()&&(g.value=eval(a.win.$wapper.win_remark.replace(/\"/g,"'")+"."+this._language_getObjectName(c[d],
"s")))}}},getParentPath:function(a,b,c){null==b&&(b=this.setQueryString(a,"rnd",Math.random(),a.win.location.href));null==c&&(c="/");"/"!=c&&"\\"!=c&&(c="/");var a=b.indexOf("?"),d=b;if(-1!=a&&(d=b.substring(0,a),"/"==d.substring(d.length-1)))return d;d=this.formatFileName(d,c);d.substring(d.length-1)==c&&(d=d.substring(0,d.length-1));a=d.lastIndexOf(c);return d=d.substring(0,a)},getRelativePath:function(a,b,c){var d="";null==c&&(c=this.getParentPath(a));for(var b=this.formatFileName(b,"/"),c=this.formatFileName(c+
"/","/"),e=a=0,f=0,g="http://,ftp://,file://,mailto:,mms://,rstp://".split(","),i=0;i<g.length;i++)c.toLowerCase().substring(0,g[i].length)==g[i]&&(a=g[i].length,e=a+1);for(;!(a=c.indexOf("/",e),c.substring(0,a+1)==b.substring(0,a+1)?f=a:d+="../",e=a+1,a==c.length-1););return d=0==f?b:d+b.substring(f+1)},getAbsolutePath:function(a,b,c){for(var b=this.formatFileName(b,"/"),d="/,http://,ftp://,file://,mailto:,mms://,rstp://".split(","),e=0;e<d.length;e++)if(b.toLowerCase().substring(0,d[e].length)==
d[e])return b;null==c&&(c=this.getParentPath(a));c=this.formatFileName(c,"/");"/"!=c.substring(c.length-1)&&(c+="/");for(e=d=0;d<b.length;){d=b.indexOf("/",e);if(-1==d){c+="/"+b.substring(e);break}e=b.substring(e,d);if(".."==e)c=this.getParentPath(a,c)+"/";else if("."!=e&&""!=e){c+=e+"/"+b.substring(d);break}e=d+1}return c=this.formatFileName(c,"/")},formatRetURL:function(a,b,c){var d="";if(null==c||""==c)c=a.win.location.href,0<a.win.$wapper._a_grid_index.length&&(c=this.setURLParams(a,c,this.getURLParams(a,
a.win.$wapper._a_grid_index[0].getAjaxUrl())));d=c;"/"==b.substring(0,1)&&(b="http://"+a.win.location.host+b);b=this.getAbsolutePath(a,b,this.getParentPath(a));c=this.getRelativePath(a,c,this.getParentPath(a,b));a=c.lastIndexOf("&");-1==a&&(a=c.lastIndexOf("?"));-1!=a&&-1==c.substring(a+1).indexOf("=")&&(c=c.substring(0,a));""==c&&""!=d&&(c=d);return c},getFormData:function(a,b,c){null==c&&(c="");b="string"==typeof b?a.win.document.getElementById(b):b;if(null==b)return"";for(var c="1.htm"+(0<c.length?
"?":"")+c,d=0;d<b.elements.length;d++){var e=b.elements[d];if(null!=e&&""!=e.name){var f=!1;"INPUT"==e.tagName&&"CHECKBOX"==e.type.toUpperCase()||"RADIO"==e.type.toUpperCase()?e.checked&&(f=!0):f=!0;f&&(c+=(-1==c.indexOf("?")?"?":"&")+b.elements[d].name+"="+this.encodeURL(e.value))}}return this.getURLParams(a,c)},getAjaxContainer:function(a,b,c,d){null!=c&&(this.getAjaxObjById(a,b).params=c);c="\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u7b49...";"string"==typeof a.win.sApiAjaxTipLoading&&
(c=a.win.sApiAjaxTipLoading);return"<div id="+b+" name="+b+' style="'+(null==d?"width:100%;":d)+'"><font color=gray style="font-size:9pt">&nbsp;&nbsp;'+c+"</font></div>"},getAjaxData:function(a,b,c,d,e){var f=b.id.replace(a.win.$wapper.win_remark+".","");a.win.document.getElementById(f)&&(a.win.document.getElementById(f+"_loading")&&(a.win.document.getElementById(f+"_loading").style.display=""),null!=d&&0!=d.indexOf("$wapper.fn.")&&(d="$wapper.fn."+d),b.script=d,b.callBack=this.fillAjaxData,b.errorHandle=
this.errorTip,null==e&&(e=!1),b.attributes=this.getURLParams(a,this.setQueryString(a,"append",e?"1":"0","1.htm?"+b.attributes)),b.doGet(c+(""!=b.params?(-1==c.indexOf("?")?"?":"&")+b.params:"")))},errorTip:function(a){var b=a.win_dom,c=a.id.replace(b.win.$wapper.win_remark+".","");if(b.win.document.getElementById(c)){var d="\u52a0\u8f7d\u6570\u636e\u9519\u8bef\u3002(\u9519\u8bef\uff1a{0})";"string"==typeof b.win.sApiAjaxTipToadingError&&(d=b.win.sApiAjaxTipToadingError);b.win.document.getElementById(c).innerHTML=
'<font color=gray style="font-size:9pt">&nbsp;&nbsp;'+d.replace("{0}",a.request.status)+"</font>"}},fillAjaxData:function(a){var b=a.request.responseText,c=a.win_dom,d=a.id.replace(c.win.$wapper.win_remark+".","");if(null!=c.win.document.getElementById(d))if(c.win.document.getElementById(d+"_loading"),"1"==$api.fn.getQueryString(c,"append","","?"+a.attributes))c.win.document.getElementById(d).innerHTML+=$api.fn.getDisplayFormat(c,$api.fn.convertorAjaxScript(c,b)),b=parseInt(c.win.document.getElementById(d).offsetHeight),
40>b&&(b=40),null!=c.win.document.getElementById(d+"_loading")&&(c.win.document.getElementById(d+"_loading").style.height=b);else{c.win.document.getElementById(d).innerHTML=$api.fn.getDisplayFormat(c,$api.fn.convertorAjaxScript(c,b));var b=parseInt(c.win.document.getElementById(d).offsetHeight),e=parseInt(c.win.document.getElementById(d).offsetWidth);40>b&&(b=40);c.win.document.getElementById(d).innerHTML='<div id="'+d+'_loading" style="display:none;position:absolute;z-index:9999;height:'+b+"px;text-align:center;width:"+
e+"px;padding-top:"+b/3+'px" class="alpha" ><img src='+$api._libaray_path+"/images/ajax-loader.gif></div>"+c.win.document.getElementById(d).innerHTML}null!=a.script&&eval(a.script.replace(/\$wapper\.fn/g,c.win.$wapper.win_remark.replace(/\"/g,"'")))},getAjaxObjById:function(a,b,c){var d=null;if(null==b)return new API_Ajax(a);if(null==a.win.$wapper._ajax_objects)alert("error");else for(var e=0;e<a.win.$wapper._ajax_objects.length;e++)if(""!=a.win.$wapper._ajax_objects[e].id&&a.win.$wapper._ajax_objects[e].id==
a.win.$wapper.win_remark+"."+b){d=a.win.$wapper._ajax_objects[e];break}null==d&&(d=new API_Ajax(a),d.id=a.win.$wapper.win_remark+"."+b);null!=c&&(d.params=c);return d},doRefresh:function(a,b){var c=null==b?this.getURLPathName(a)+"?"+this.getURLParams(a):b;this.gotoURL(a,c)},getReturnURL:function(a,b,c){null==b&&(b=1);null==c&&(c=a.win.location.href);for(var d="",e=0;e<b;e++){d=this.getQueryString(a,"returl","",c);if(""==d)return"";c=d=this.getAbsolutePath(a,d,this.getParentPath(a,c))}c&&0!=c.toLowerCase().indexOf("http://")&&
"/"!=c.substring(0,1)&&(c=this.getParentPath(a)+"/"+c);return this.setQueryString(a,null,null,c?c:"")},checkReturnURL:function(a){return""!=this.getQueryString(a,"returl","")},doReturn:function(a,b,c){b=this.getReturnURL(a,b);if(null==b||""==b)b=c;null==b||""==b||this.gotoURL(a,b)},getNextPage:function(a,b,c){var d=null,d=this.setQueryString(a,"returl",this.formatRetURL(a,b,c),b,!0);return this.setQueryString(a,null,null,d)},nextPage:function(a,b,c){this.gotoURL(a,this.getNextPage(a,b,c))},getIpExpURL:function(a,
b){for(var c=this._a_ip_replace_exp,d="",e=0;e<c.length;e+=2)d+=(0==e?"":"\n")+c[e]+"\n"+c[e+1];b=this.setQueryString(a,"ip_exp_prefix",this._prefix_of_ip_exp,b);return b=this.setQueryString(a,"ip_replace_exp",d,b)},getHiddenFrame:function(a){return a.win.frames[a.win.$wapper.sHiddenFrameName]},selfAction:function(a,b,c){null==b||""==b||(c?confirm(c)&&this.gotoURL(a,this.getActionURL(b),this.getHiddenFrame(a)):this.gotoURL(a,this.getActionURL(b),this.getHiddenFrame(a)))},selfURL:function(a,b,c){null==
b||""==b||(c?confirm(c)&&this.gotoURL(a,b,this.getHiddenFrame(a)):this.gotoURL(a,b,this.getHiddenFrame(a)))},gotoURL:function(a,b,c){null==c&&(c=a.win);b=this.getAbsolutePath(a,b);if(2048>b.length)c.location.href=b;else{var d=this.getURLParams(a,b).split("&"),e=a.win.document.getElementById("_form_post_url");null==e&&(e=a.win.document.createElement("DIV"),e.innerHTML+='<form name=_form_post_url method=post style="display:none;"></form>',0==a.win.document.body.childNodes.length?a.win.document.body.appendChild(e):
a.win.document.body.insertBefore(e,a.win.document.body.firstChild),e=a.win.document.getElementById("_form_post_url"));for(var f="",g=0;g<d.length;g++){var i=d[g].indexOf("=");if(-1!=i)var h=d[g].substring(0,i),i=this.decodeURL(d[g].substring(i+1)),f=f+("<input name="+h+' value="'+i.replace(/\"/g,"&quot;")+'">')}e.innerHTML=f;e.action=this.getURLPathName(a,b);e.method="post";e.target=c.name;e.submit()}},getGrid:function(a,b){for(var c=null,d=0;d<a.win.$wapper._a_grid_index.length;d++)if(a.win.$wapper._a_grid_index[d].sGridName==
b){c=a.win.$wapper._a_grid_index[d];break}null==c&&(c=new WebGrid(a),c.sGridName=b,c.nGridIndex=a.win.$wapper._a_grid_index.length,a.win.$wapper._a_grid_index[a.win.$wapper._a_grid_index.length]=c);return c},getRowSelector:function(a,b,c){var b=this.getGrid(a,b),d=b.getRowSelector();null==d&&(d=new RowSelector(a,b.sGridId,c));return d},getForm:function(a,b){for(var c=null,d=0;d<a.win.$wapper._a_web_form.length;d++)if(a.win.$wapper._a_web_form[d].sFrmName==b){c=a.win.$wapper._a_web_form[d];break}null==
c&&(c=new WebForm(a),c.sFrmName=b,c._web_form_index=a.win.$wapper._a_web_form.length,a.win.$wapper._a_web_form[a.win.$wapper._a_web_form.length]=c);return c},writePageInfo:function(a,b,c,d,e,f){if(null==f||""==f)f="page";var g=this.getQueryString(a,"page_size"+("page"==f?"":"_"+f));null!=g&&""!=g&&!isNaN(g)&&(c=parseInt(g));var g=c*(d-1)+1,i=c*d;i>b&&(i=b);var h=$api.lang.grid._pr_page_info,h=h.replace("@@RECORD_COUNT",b),h=1<b?h.replace("@@PAGE_SIZE","<input id=txtPageSize_"+f+' value="'+c+'" style="width:25px;background:none;height:18px;border:none;border-bottom:1px solid black;text-align:center;" onmouseover="this.focus();this.select();" onkeyup="if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=\'\'&&parseInt(this.value)>0){$wapper.api.changePageSize(this.value,\''+
f+"');}else{this.value='';}}\" maxlength=4>"):h.replace("@@PAGE_SIZE",c),h=1<e?h.replace("@@CURRENT_PAGE",'<input style="width:25px;background:none;height:18px;border:none;border-bottom:1px solid black;text-align:center;" value="'+d+'" onmouseover="this.focus();this.select();" onkeyup="if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=\'\'){$wapper.api.changePageIndex(this.value,\''+f+"');}else{this.value='';}}\">"):h.replace("@@CURRENT_PAGE",d),h=h.replace("@@PAGE_COUNT",e),h=h.replace("@@START",
g),h=h.replace("@@END",i);null==a.win.document.getElementById("spanPageInfo_"+f)?a.win.document.write("<span id=spanPageInfo_"+f+">"+h+"</span>"):a.win.document.getElementById("spanPageInfo_"+f).innerHTML=h;a.win.document.getElementById("spanPageInfo_"+f)&&(a.win.document.getElementById("spanPageInfo_"+f).style.display=0<e?"":"none")},writePageAnchor:function(a,b,c,d){if(null==d||""==d)d="page";var e=b-b%10+1;0==b%10&&(e-=10);var f="<nobr>",g=e+10;1<c&&(f+="<a href=\"javascript:$wapper.api.changePageIndex(1,'"+
d+"')\">"+$api.lang.grid._pr_first_page+'</a>&nbsp;<a href="javascript:$wapper.api.changePageIndex('+c+",'"+d+"')\">"+$api.lang.grid._pr_last_page+"</a>&nbsp;");for(10<b&&(f+='<a href="javascript:$wapper.api.changePageIndex('+(b-10)+",'"+d+"')\">&lt;&lt;</a>&nbsp;");e<g&&e<=c;e++)a.win.document.getElementById("spanGotoPage_"+d)&&1>=c||(f=e==b?f+(e+"&nbsp;"):f+('<a href="javascript:$wapper.api.changePageIndex('+e+",'"+d+"')\"><b>"+e+"</b></a>&nbsp;"));g<=c&&(f+='<a href="javascript:$wapper.api.changePageIndex('+
(b+10<=c?b+10:c)+",'"+d+"')\">&gt;&gt;</a>");f+="</nobr>";null==a.win.document.getElementById("spanPageAnchor_"+d)?a.win.document.write("<span id=spanPageAnchor_"+d+">"+f+"</span>"):a.win.document.getElementById("spanPageAnchor_"+d).innerHTML=f;a.win.document.getElementById("spanGotoPage_"+d)&&(a.win.document.getElementById("spanGotoPage_"+d).style.display=1<c?"":"none")},writePageSelect:function(a,b,c,d){if(null==d||""==d)d="page";var e;e=""+("<nobr>"+$api.lang.grid._wg_goto_page+"<select id=selPageSelect onchange=$wapper.api.changePageIndex(this.value,'"+
d+"')>");if(1>=c)e+='<option value="">'+$api.lang.grid._wg_page_select;else for(var f=1;f<=c;f++)e+='<option value="'+f+'" '+(f==b?"selected":"")+">&nbsp;"+f+"&nbsp;";e+="</select></nobr>";null==a.win.document.getElementById("spanPageSelect_"+d)?a.win.document.write("<span id=spanPageSelect_"+d+">"+e+"</span>"):a.win.document.getElementById("spanPageSelect_"+d).innerHTML=e},writePageTextBox:function(a,b,c,d){if(null==d||""==d)d="page";c="<nobr>"+$api.lang.grid._wg_goto_page;c=c+('<input style="width:40px;text-align:center;" value="'+
b+"\" onkeyup=\"if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=''){$wapper.api.changePageIndex(this.value,'"+d+"');}else{this.value='';}}\">")+"</nobr>";null==a.win.document.getElementById("spanPageTextBox_"+d)?a.win.document.write("<span id=spanPageTextBox_"+d+">"+c+"</span>"):a.win.document.getElementById("spanPageTextBox_"+d).innerHTML=c},getGridByPageKey:function(a,b){var c=null;null!=b&&"object"==typeof b&&(c=b,b=c.ajax_grid);null==c&&(c=this.getGrid(a,"page"==b?"webGrid":this.toVariableName(b.replace("page_",
""),"grd")),c.ajax_grid=b);return c},changePageIndex:function(a,b,c){if(null==c||""==c)c="page";var d=this.getGridByPageKey(a,c);if("function"!=typeof d.beforeChangePageIndex||d.beforeChangePageIndex(b,c))b=this.setQueryString(a,c,null==b?"1":b),-1!=b.indexOf("#")&&(b=b.substring(0,b.indexOf("#"))),this._pr_change_window_location(a,b)},changePageSize:function(a,b,c){if(null==c||""==c)c="page";var d=this.getGridByPageKey(a,c);if("function"!=typeof d.beforeChangePageSize||d.beforeChangePageSize(b,c))b=
this.setQueryString(a,"page_size"+("page"==c?"":"_"+c),b),this._pr_change_window_location(a,b)},writeAjaxPageInfo:function(a,b,c,d,e,f){if(null==f||""==f)f="page";a=this.getQueryString(a,"page_size"+("page"==f?"":"_"+f));null!=a&&""!=a&&!isNaN(a)&&(c=parseInt(a));var a=c*(d-1)+1,g=c*d;g>b&&(g=b);var i=$api.lang.grid._pr_page_info,i=i.replace("@@RECORD_COUNT",b),i=1<b?i.replace("@@PAGE_SIZE","<input id=txtPageSize_"+f+' value="'+c+'" style="width:25px;background:none;height:18px;border:none;border-bottom:1px solid black;text-align:center;" onmouseover="this.focus();this.select();" onkeyup="if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=\'\'&&parseInt(this.value)>0){$wapper.api.changeAjaxPageSize(this.value,\''+
f+"');}else{this.value='';}}\" maxlength=4>"):i.replace("@@PAGE_SIZE",c),i=1<e?i.replace("@@CURRENT_PAGE",'<input style="width:25px;background:none;height:18px;border:none;border-bottom:1px solid black;text-align:center;" value="'+d+'" onmouseover="this.focus();this.select();" onkeyup="if(event.keyCode==13){if(!isNaN(this.value)&&this.value!=\'\'){$wapper.api.changeAjaxPageIndex(this.value,\''+f+"');}else{this.value='';}}\">"):i.replace("@@CURRENT_PAGE",d),i=i.replace("@@PAGE_COUNT",e),i=i.replace("@@START",
a),i=i.replace("@@END",g);return"<span id=spanPageInfo_"+f+' style="display:'+(0<e?"":"none")+'">'+i+"</span>"},changeAjaxPageIndex:function(a,b,c,d){if(null==c||""==c)c="page";var e=this.getGridByPageKey(a,c);null!=e&&(c=e.ajax_grid,null!=d?this.getAjaxObjById(a,"div_grid_"+c).url=d:d=this.getAjaxObjById(a,"div_grid_"+c).url,e.saveRowSelection(),this.getAjaxData(a,this.getAjaxObjById(a,"div_grid_"+c),null==b?d:this.setQueryString(a,c,b,d),"$wapper.fn.$wapper.afterAjaxLoad('"+c+"');try{$wapper.fn."+
("page"==c?"webGrid":this.toVariableName(c.replace("page_",""),"grd"))+".loadRowSelection();}catch(e){alert(e)}"))},changeAjaxPageSize:function(a,b,c,d){if(null==c||""==c)c="page";var e=this.getGridByPageKey(a,c);null!=e&&(c=e.ajax_grid,null!=d?this.getAjaxObjById(a,"div_grid_"+c).url=d:d=this.getAjaxObjById(a,"div_grid_"+c).url,e.saveRowSelection(),this.getAjaxData(a,this.getAjaxObjById(a,"div_grid_"+c),this.setQueryString(a,"page_size"+("page"==c?"":"_"+c),b,d),"$wapper.fn.$wapper.afterAjaxLoad('"+
c+"');try{$wapper.fn."+("page"==c?"webGrid":this.toVariableName(c.replace("page_",""),"grd"))+".loadRowSelection();}catch(e){alert(e)}"))},_pr_change_window_location:function(a,b){var c=a.win.document.getElementById("_form_url_params");if(c){for(var d=0;d<c.elements.length;d++)c.elements[d].value=this.decodeURL(c.elements[d].value);c.submit()}else a.win.location.href=b},html:function(a,b){a.win.document.write(b)},load:function(a,b){if(null==b&&null!=a.win.onload)a.win.onload();else"function"==typeof b&&
(a.win.onload=b)},resize:function(a,b){if(null==b&&null!=a.win.onresize)a.win.onresize();else"function"==typeof b&&(a.win.onresize=b)},getCookie:function(a){null==$api.dom.cookie&&($api.dom.cookie="");for(var b=$api.dom.cookie.split(";"),c=-1,d=0;d<b.length;d++)if(c=b[d].indexOf("="),-1!=c){var e=this.trim(b[d].substring(0,c)),c=this.decodeURL(b[d].substring(c+1));if(e.toUpperCase()==a.toUpperCase()||e.toUpperCase()==this.encodeURL(a).toUpperCase())return c}return null},addCookie:function(a,b){null==
$api.dom.cookie&&($api.dom.cookie="");for(var c="",d=!1,e=$api.dom.cookie.split(";"),f=-1,g=0;g<e.length;g++)if(f=e[g].indexOf("="),-1!=f){""!=c&&(c+="; ");var i=this.trim(e[g].substring(0,f)),f=e[g].substring(f+1);i.toUpperCase()==a.toUpperCase()||i.toUpperCase()==this.encodeURL(a).toUpperCase()?(c+=i+"="+this.encodeURL(b),d=!0):c+=i+"="+f}d||(c+=(""==c?"":"; ")+this.encodeURL(a)+"="+this.encodeURL(b));$api.dom.cookie=c},setPrintable:function(a){var b="",b=0==a.cellSpacing?a.borderColor:a.style.backgroundColor;
if(null==b||""==b)b="black";a.style.borderLeft="solid "+b+" 1px";a.style.borderTop="solid "+b+" 1px";for(var c=0;c<a.rows.length;c++)for(var d=0;d<a.rows[c].cells.length;d++)a.rows[c].cells[d].style.borderRight="solid "+b+" 1px",a.rows[c].cells[d].style.borderBottom="solid "+b+" 1px",""==a.rows[c].cells[d].innerHTML&&(a.rows[c].cells[d].innerHTML="&nbsp;");a.cellSpacing=0},mergeCell:function(a,b,c,d,e){var f="";null==c&&(c=0);for(null==d&&(d=a.rows.length-1);c<d;c++)if(!(a.rows[c].cells.length-1<
b))for(var g=c+1;g<=d;g++){if(a.rows[g].cells.length-1<b)var i=!0,h=!0;else i=!1,h=this.getInnerText(a.rows[g].cells[b])!=this.getInnerText(a.rows[c].cells[b]);if(h||!h&&g==d){a.rows[c].cells[b].rowSpan=g-c+(h?0:1);for(var j=c+1;j<(h?g:g+1);j++)f=this.getInnerHTML(a.rows[j].cells[b]),a.rows[j].deleteCell(b);e&&(a.rows[c].cells[b].innerHTML=f);c=i?g:g-1;break}}},mergeCol:function(a,b,c,d){null==c&&(c=0);null==d&&(d=a.cols.length-1);a.rows[b].cells[c].colSpan=d-c+1;for(var e=c+1;e<=d;e++)a.rows[b].deleteCell(c+
1)},setNoBR:function(a){for(var b=0;b<a.rows.length;b++)for(var c=0;c<a.rows[b].cells.length;c++)a.rows[b].cells(c).innerHTML="<nobr>"+a.cells(b).innerHTML+"</nobr>"},getCSVData:function(a){for(var b="",c="",d=0;d<a.rows.length;d++){0<d&&(b+="\n");for(var e=0;e<a.rows[d].cells.length;e++){c=this.trim(this.getInnerText(a.rows[d].cells[e]));c=c.replace(/\"/g,'""');if(-1!=c.indexOf('"')||-1!=c.indexOf(",")||-1!=c.indexOf("\n")||-1!=c.indexOf("\r"))c='"'+c+'"';b+=(0==e?"":",")+c}}return b},emptyFunc:function(){},
loadAjaxData:function(a,b,c,d,e){if(null!=this.id(a,b)){null==d&&(d="{1}");var f=this.id(a,b);f.options.length=1;b=this.getAjaxObjById(a);b.callBack=function(){for(var b=$api.fn.csvToArray(this.getData()),c=0;c<b.length;c++)if(!(null==b[c][0]||""==b[c][0])){var h=a.dom.createElement("OPTION");h.value=b[c][0];for(var j=d,k=0;k<b[c].length;k++)j=j.replace(RegExp("{["+k+"]}","g"),b[c][k]);h.text=j;f.add(h)}"function"==typeof e&&(this.emptyFunc=e,this.emptyFunc())};b.errorHandle=function(){};b.doGet(c)}},
showLocalImg:function(a,b,c){b&&(this._IE()?(b.select(),c.src=a.dom.selection.createRange().text):this._FireFox()?c.src=b.files?"data:"+b.files.item(0).getAsDataURL():b.value:(a=b.files[0],b=new FileReader,b.onload=function(a){c.src="data:"+a.target.result},b.readAsDataURL(a)))},getLocalFileData:function(a,b){if(b){if(this._IE())return b.select(),a.dom.selection.createRange().text;if(this._FireFox())return b.files?b.files.item(0).getAsDataURL():b.value;var c=b.files[0],d=new FileReader;d.onload=function(a){b.value=
a.target.result};d.readAsDataURL(c)}return""},getFakePath:function(a,b){return this.getLocalFilePath(b)}},client:null};$api.fn._GAP();function _IE(){return-1!=$api.win.navigator.appVersion.indexOf("MSIE")}function _FireFox(){return-1!=$api.win.navigator.userAgent.toLowerCase().indexOf("firefox")}var ClientBrowser={},ua=navigator.userAgent.toLowerCase(),s;
(s=ua.match(/msie ([\d.]+)/))?ClientBrowser.ie=s[1]:(s=ua.match(/firefox\/([\d.]+)/))?ClientBrowser.firefox=s[1]:(s=ua.match(/chrome\/([\d.]+)/))?ClientBrowser.chrome=s[1]:(s=ua.match(/opera.([\d.]+)/))?ClientBrowser.opera=s[1]:(s=ua.match(/version\/([\d.]+).*safari/))&&(ClientBrowser.safari=s[1]);$api.client=ClientBrowser;function _RP(a,b,c){return a.replace(b,c)}function _IO(a,b,c){return a.indexOf(b,c)}function _SS(a,b,c){return a.substring(b,c)}function _WLH(){return $api.win.location.href}
function _DW(a){$api.dom.write(a)}function _WS(a){_DW("<script language=javascript>");_DW(a);_DW("<\/script>")}function _WS2(a){_DW('<script language=javascript src="'+a+(-1==a.indexOf(".js")&&-1==a.indexOf(".jsp")?".js":"")+'"><\/script>')}function _CCA(a,b,c){return a.charCodeAt(b,c)}function _FCC(a){return String.fromCharCode(a)}function _FCCS(a){for(var b="";0<a;)b=_FCC(a%100)+b,a=(a-a%100)/100;return b}
_WS("function "+_FCCS(956968)+'(s){\nif(s==null){return "";}\nvar sRet="";s = s.replace(/\\\\\\\\/g,"\\\\");\nfor(var i=0;i<s.length;i++){\nvar n='+_FCCS(95676765)+"(s,i,i+1);\nif(n<32||n>126){\nsRet+="+_FCCS(958383)+"(s,i,i+1);\n}\nelse{\nn=158-n;\nsRet+="+_FCCS(95706767)+'(n);\n}\n}\nreturn sRet.replace(/\\\\/g,"\\\\\\\\");\n}\n');
_WS("function "+_FCCS(95696850)+'(s,ns){\nif(s==null){return "";}\nvar sRet="";\nif(ns==null){\nns=3;\n}\nfor(var i=0;i<s.length;i+=ns){\nvar n='+_FCCS(95676765)+"(s,i,i+1);\nif(n<32||n>126){\nsRet+="+_FCCS(958383)+"(s,i,i+1);\n}\nelse{\nn=158-n;\nsRet+="+_FCCS(95706767)+"(n);\n}\nsRet+="+_FCCS(958383)+"(s,i+1,i+ns);\n}\nreturn sRet;\n}\n");_IE()&&_DW("<script language=VBScript>\nfunction vbsMidB(s)\nvbsMidB=MidB(s,1)\nend function\n\nfunction vbsASC(s)\nvbsASC=asc(s)\nend function\nfunction vbsCHR(n)\nvbsCHR=chr(n)\nend function\n<\/script>");
_WS2($api._libaray_path+"/_ajax");_WS2($api._libaray_path+"/_row_select");_WS2($api._libaray_path+"/_web_grid");_WS2($api._libaray_path+"/_web_form");$api._gap_!=$api._libaray_path&&_WS2($api._gap_+"/_global");
