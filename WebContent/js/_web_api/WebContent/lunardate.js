var LunarDaysOfMonth=[54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936],LunarLeapYear=[64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3];function GetLeapMonth(a){var b=LunarLeapYear[a-2001>>1];return 0==(a-2001&1)?b>>4:b&15}
function LunarMonthDays(a,b){var c,e,f;c=0;e=29;f=16-b;b>GetLeapMonth(a)&&0<GetLeapMonth(a)&&f--;0<(LunarDaysOfMonth[a-2001]&1<<f)&&e++;b==GetLeapMonth(a)&&(c=0<(LunarDaysOfMonth[a-2001]&1<<f-1)?30:29);return e+(c<<16)}function LunarYearDays(a){var b,c;b=0;for(var e=1;12>=e;e++)c=LunarMonthDays(a,e),b+=c>>16&65535,b+=c&65535;return b}
function FormatLunarYear(a){var b=new String("\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678"),c=new String("\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5"),b=b.substr((a-4)%10,1),b=b+c.substr((a-4)%12,1);return b+"\u5e74"}function FormatLunarMonth(a){var b=new String("\u6b63\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341");return(10>=a?b.substr(a-1,1):11==a?"\u5341\u4e00":"\u5341\u4e8c")+"\u6708"}
function FormatLunarDay(a){var b=new String("\u521d\u5341\u5eff\u4e09"),c=new String("\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341");return 20!=a&&30!=a?b.substr((a-1)/10,1)+c.substr((a-1)%10,1):20!=a?b.substr(a/10,1)+"\u5341":"\u4e8c\u5341"}
function GetLunarDateString(a){var b,c,e,f=!1,d=Math.round(a.getTime()/864E5)-11323;if(23>d)iYear=2E3,c=12,e=d+7;else{d-=23;b=2001;e=c=1;for(a=LunarYearDays(b);d>=a;)d-=a,b++,a=LunarYearDays(b);for(a=LunarMonthDays(b,c)&65535;d>=a;){d-=a;if(c==GetLeapMonth(b)){a=LunarMonthDays(b,c)>>16;if(d<a){f=0<a?!0:!1;break}d-=a}c++;a=LunarMonthDays(b,c)&65535}e+=d}return FormatLunarYear(b)+(f?"\u95f0":"")+FormatLunarMonth(c)+FormatLunarDay(e)};
