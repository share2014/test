WindowStore={doSetCookie:!1,cookieName:"__window_store__",expired:null,init:function(a,b){WindowStore.cookieName=a||WindowStore.cookieName;if(b)WindowStore.expired=b;else{var c=new Date;c.setYear(c.getYear()+1903);WindowStore.expired=c}Windows.windows.each(function(a){a.setCookie(a.getId(),WindowStore.expired)});Windows.addObserver({onShow:function(){WindowStore._saveCookie()},onClose:function(){WindowStore._saveCookie()},onHide:function(){WindowStore._saveCookie()}});WindowStore._restoreWindows();
WindowStore._saveCookie()},show:function(a){eval("var cookie = "+WindowUtilities.getCookie(WindowStore.cookieName));null!=cookie?cookie[a.getId()]&&a.show():a.show()},_saveCookie:function(){if(doSetCookie){var a="{";Windows.windows.each(function(b){"{"!=a&&(a+=",");a+=b.getId()+": "+b.isVisible()});a+="}";WindowUtilities.setCookie(a,[WindowStore.cookieName,WindowStore.expired])}},_restoreWindows:function(){eval("var cookie = "+WindowUtilities.getCookie(WindowStore.cookieName));null!=cookie&&(doSetCookie=
!1,Windows.windows.each(function(a){cookie[a.getId()]&&a.show()}));doSetCookie=!0}};WindowCloseKey={keyCode:Event.KEY_ESC,init:function(a){a&&(WindowCloseKey.keyCode=a);Event.observe(document,"keydown",this._closeCurrentWindow.bindAsEventListener(this))},_closeCurrentWindow:function(a){var a=a||window.event,b=top.Windows.focusedWindow;(a.which||a.keyCode)==WindowCloseKey.keyCode&&b&&(b.cancelCallback?top.Dialog.cancelCallback():b.okCallback?top.Dialog.okCallback():top.Windows.close(top.Windows.focusedWindow.getId()))}};
